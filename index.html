{% extends "layout.html" %}

{% block title %}
    Index
{% endblock %}

{% block main %}
    <div class="section">

                <h2>Portfolio of Stocks</h2>
                <table class = "table">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Name</th>
                            <th>Shares</th>
                            <th>Price</th>
                            <th>TOTAL</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- TODO: Loop through the database entries to display them in this table -->
                        {% for portfolio in portfolios %}
                        <tr>
                            <td>{{portfolio.stock}}</td>

                            {% for k, v in stock_data.items() %}
                                {% if k == portfolio.stock %}
                                    <td>{{v.name}}</td>
                                {% endif %}
                            {% endfor %}

                            <td>{{portfolio.stock_count}}</td>

                            {% for k, v in stock_data.items() %}
                                {% if k == portfolio.stock %}
                                    <td>{{v.price}}</td>
                                {% endif %}
                            {% endfor %}

                            {% for k, v in stock_data.items() %}
                                {% if k == portfolio.stock %}
                                    <td>{{(v.price * portfolio.stock_count) | usd}}</td>
                                {% endif %}
                            {% endfor %}

                        </tr>
                        {% endfor %}

                        <tr>
                            <td>CASH</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>${{balance}}</td>
                        </tr>
                        
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td><strong>${{(fb + total_money) | usd}}</strong></td>
                        </tr>

                    </tbody>
                </table>
    </div>
  {% endblock %}
